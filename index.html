<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solving for X Helper</title>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(to right, #1e3c72, #2a5298);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 3em;
        }
        form {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
        }
        button {
            font-size: 1.2em;
            padding: 10px 20px;
            cursor: pointer;
        }
        #solution {
            margin-top: 20px;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script>
        function parseEquation(equation, variable) {
            equation = equation.replace(/\s+/g, '');
            let [lhs, rhs] = equation.split('=');

            let [a, b] = parseSide(lhs, variable);
            let [c, d] = parseSide(rhs, variable);

            let A = a - c;
            let B = b - d;
            return [A, B];
        }

        function parseSide(side, variable) {
            let terms = side.split(/(?=[+-])/);
            let a = 0, b = 0;
            terms.forEach(term => {
                if (term.includes(variable)) {
                    let coef = parseFloat(term.replace(variable, ''));
                    if (!isNaN(coef)) {
                        a += coef;
                    }
                } else if (term.includes('^')) {
                    let [base, exponent] = term.split('^').map(parseFloat);
                    if (!isNaN(base) && !isNaN(exponent)) {
                        b += Math.pow(base, exponent);
                    }
                } else if (term.includes('/')) {
                    let [numerator, denominator] = term.split('/').map(parseFloat);
                    if (!isNaN(numerator) && !isNaN(denominator)) {
                        b += numerator / denominator;
                    }
                } else {
                    let constant = parseFloat(term);
                    if (!isNaN(constant)) {
                        b += constant;
                    }
                }
            });
            return [a, b];
        }

        function solveQuadratic(a, b, c) {
            let discriminant = b * b - 4 * a * c;
            if (discriminant < 0) {
                throw new Error("No real solutions exist.");
            }
            let root1 = (-b + Math.sqrt(discriminant)) / (2 * a);
            let root2 = (-b - Math.sqrt(discriminant)) / (2 * a);
            return [root1, root2];
        }

        function solveEquation(equation) {
            let variable = equation.match(/[a-zA-Z]/g)[0];
            let steps = [];
            steps.push(`Step 1: Start with the equation: ${equation}`);

            if (equation.includes('^')) {
                let [lhs, rhs] = equation.split('=');

                let [a, b, c] = [0, 0, 0];
                lhs.split(/(?=[+-])/).forEach(term => {
                    if (term.includes(variable + '^2')) {
                        a += parseFloat(term.replace(variable + '^2', ''));
                    } else if (term.includes(variable)) {
                        b += parseFloat(term.replace(variable, ''));
                    } else {
                        c += parseFloat(term);
                    }
                });
                rhs.split(/(?=[+-])/).forEach(term => {
                    if (term.includes(variable + '^2')) {
                        a -= parseFloat(term.replace(variable + '^2', ''));
                    } else if (term.includes(variable)) {
                        b -= parseFloat(term.replace(variable, ''));
                    } else {
                        c -= parseFloat(term);
                    }
                });

                steps.push(`Step 2: Convert to standard form A${variable}^2 + B${variable} + C = 0: ${a}${variable}^2 + ${b}${variable} + ${c} = 0`);

                let [root1, root2] = solveQuadratic(a, b, c);
                steps.push(`Step 3: Solve the quadratic equation for ${variable}: ${variable} = ${root1} or ${variable} = ${root2}`);

                return [[root1, root2], steps];
            } else if (equation.includes('/')) {
                let [lhs, rhs] = equation.split('=');

                let [numerator, denominator] = lhs.split('/').map(parseFloat);
                let constant = parseFloat(rhs);
                if (isNaN(numerator) || isNaN(denominator) || isNaN(constant)) {
                    throw new Error("Invalid rational equation.");
                }

                let solution = numerator / constant;
                steps.push(`Step 2: Multiply both sides by the denominator to solve for ${variable}: ${variable} = ${solution}`);

                return [solution, steps];
            } else {
                let [A, B] = parseEquation(equation, variable);
                steps.push(`Step 2: Convert to standard form A${variable} + B = 0: ${A}${variable} + ${B} = 0`);

                let solution = solveForVariable(A, B);
                steps.push(`Step 3: Solve for ${variable}: ${variable} = ${solution}`);

                return [solution, steps];
            }
        }

        function solveForVariable(A, B) {
            if (A === 0) {
                throw new Error("No solution or infinite solutions exist.");
            }
            return -B / A;
        }

        function handleFormSubmit(event) {
            event.preventDefault();
            const equation = document.getElementById('equation').value;
            const resultDiv = document.getElementById('result');
            const stepsDiv = document.getElementById('steps');

            try {
                const [solution, steps] = solveEquation(equation);
                stepsDiv.innerHTML = steps.join('<br>');
                resultDiv.innerHTML = `Solution: ${Array.isArray(solution) ? solution.join(' or ') : solution}`;
            } catch (error) {
                resultDiv.innerHTML = `Error: ${error.message}`;
            }
        }
    </script>
</head>
<body>
    <h1>Solving for X Helper</h1>
    <form id="equationForm" onsubmit="handleFormSubmit(event)">
        <label for="equation">Enter the equation (e.g., 2x+1=3x+6 or 4x^2+1=3x+2 or 1/x=2):</label>
        <input type="text" id="equation" name="equation" required>
        <button type="submit">Solve</button>
    </form>
    <div id="solution">
        <h2>Solution:</h2>
        <div id="steps"></div>
        <div id="result"></div>
    </div>
</body>
</html>
